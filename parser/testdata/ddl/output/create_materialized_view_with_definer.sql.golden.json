[
  {
    "CreatePos": 0,
    "StatementEnd": 368,
    "Name": {
      "Database": null,
      "Table": {
        "Name": "fresh_mv",
        "QuoteType": 1,
        "NamePos": 25,
        "NameEnd": 33
      }
    },
    "IfNotExists": false,
    "OnCluster": null,
    "Refresh": {
      "RefreshPos": 35,
      "Frequency": "EVERY",
      "Interval": {
        "IntervalPos": 0,
        "Expr": {
          "NumPos": 49,
          "NumEnd": 50,
          "Literal": "1",
          "Base": 10
        },
        "Unit": {
          "Name": "HOUR",
          "QuoteType": 1,
          "NamePos": 51,
          "NameEnd": 55
        }
      },
      "Offset": {
        "IntervalPos": 0,
        "Expr": {
          "NumPos": 63,
          "NumEnd": 65,
          "Literal": "10",
          "Base": 10
        },
        "Unit": {
          "Name": "MINUTE",
          "QuoteType": 1,
          "NamePos": 66,
          "NameEnd": 72
        }
      }
    },
    "RandomizeFor": null,
    "DependsOn": null,
    "Settings": null,
    "HasAppend": true,
    "Engine": null,
    "HasEmpty": false,
    "Destination": {
      "ToPos": 80,
      "TableIdentifier": {
        "Database": null,
        "Table": {
          "Name": "events_export",
          "QuoteType": 1,
          "NamePos": 83,
          "NameEnd": 96
        }
      },
      "TableSchema": {
        "SchemaPos": 98,
        "SchemaEnd": 179,
        "Columns": [
          {
            "NamePos": 106,
            "ColumnEnd": 129,
            "Name": {
              "Ident": {
                "Name": "timestamp",
                "QuoteType": 3,
                "NamePos": 106,
                "NameEnd": 115
              },
              "DotIdent": null
            },
            "Type": {
              "LeftParenPos": 128,
              "RightParenPos": 129,
              "Name": {
                "Name": "DateTime64",
                "QuoteType": 1,
                "NamePos": 117,
                "NameEnd": 127
              },
              "Params": [
                {
                  "NumPos": 128,
                  "NumEnd": 129,
                  "Literal": "9",
                  "Base": 10
                }
              ]
            },
            "NotNull": null,
            "Nullable": null,
            "DefaultExpr": null,
            "MaterializedExpr": null,
            "AliasExpr": null,
            "Codec": null,
            "TTL": null,
            "Comment": null,
            "CompressionCodec": null
          },
          {
            "NamePos": 138,
            "ColumnEnd": 153,
            "Name": {
              "Ident": {
                "Name": "field_1",
                "QuoteType": 3,
                "NamePos": 138,
                "NameEnd": 145
              },
              "DotIdent": null
            },
            "Type": {
              "Name": {
                "Name": "String",
                "QuoteType": 1,
                "NamePos": 147,
                "NameEnd": 153
              }
            },
            "NotNull": null,
            "Nullable": null,
            "DefaultExpr": null,
            "MaterializedExpr": null,
            "AliasExpr": null,
            "Codec": null,
            "TTL": null,
            "Comment": null,
            "CompressionCodec": null
          },
          {
            "NamePos": 161,
            "ColumnEnd": 176,
            "Name": {
              "Ident": {
                "Name": "field_2",
                "QuoteType": 3,
                "NamePos": 161,
                "NameEnd": 168
              },
              "DotIdent": null
            },
            "Type": {
              "Name": {
                "Name": "String",
                "QuoteType": 1,
                "NamePos": 170,
                "NameEnd": 176
              }
            },
            "NotNull": null,
            "Nullable": null,
            "DefaultExpr": null,
            "MaterializedExpr": null,
            "AliasExpr": null,
            "Codec": null,
            "TTL": null,
            "Comment": null,
            "CompressionCodec": null
          }
        ],
        "AliasTable": null,
        "TableFunction": null
      }
    },
    "SubQuery": {
      "HasParen": true,
      "Select": {
        "SelectPos": 226,
        "StatementEnd": 368,
        "With": null,
        "Top": null,
        "HasDistinct": false,
        "DistinctOn": null,
        "SelectItems": [
          {
            "Expr": {
              "Name": "timestamp",
              "QuoteType": 1,
              "NamePos": 238,
              "NameEnd": 247
            },
            "Modifiers": [],
            "Alias": null
          },
          {
            "Expr": {
              "Name": "field_1",
              "QuoteType": 1,
              "NamePos": 254,
              "NameEnd": 261
            },
            "Modifiers": [],
            "Alias": null
          },
          {
            "Expr": {
              "Name": "field_2",
              "QuoteType": 1,
              "NamePos": 268,
              "NameEnd": 275
            },
            "Modifiers": [],
            "Alias": null
          },
          {
            "Expr": {
              "Name": "FROM",
              "QuoteType": 1,
              "NamePos": 278,
              "NameEnd": 282
            },
            "Modifiers": [],
            "Alias": {
              "Name": "event_table",
              "QuoteType": 1,
              "NamePos": 283,
              "NameEnd": 294
            }
          }
        ],
        "From": null,
        "ArrayJoin": null,
        "Window": null,
        "Prewhere": null,
        "Where": {
          "WherePos": 296,
          "Expr": {
            "LeftExpr": {
              "Name": {
                "Name": "toStartOfHour",
                "QuoteType": 1,
                "NamePos": 302,
                "NameEnd": 315
              },
              "Params": {
                "LeftParenPos": 315,
                "RightParenPos": 325,
                "Items": {
                  "ListPos": 316,
                  "ListEnd": 325,
                  "HasDistinct": false,
                  "Items": [
                    {
                      "Expr": {
                        "Name": "timestamp",
                        "QuoteType": 1,
                        "NamePos": 316,
                        "NameEnd": 325
                      },
                      "Alias": null
                    }
                  ]
                },
                "ColumnArgList": null
              }
            },
            "Operation": "=",
            "RightExpr": {
              "Name": {
                "Name": "toStartOfHour",
                "QuoteType": 1,
                "NamePos": 329,
                "NameEnd": 342
              },
              "Params": {
                "LeftParenPos": 342,
                "RightParenPos": 368,
                "Items": {
                  "ListPos": 343,
                  "ListEnd": 367,
                  "HasDistinct": false,
                  "Items": [
                    {
                      "Expr": {
                        "LeftExpr": {
                          "Name": {
                            "Name": "now",
                            "QuoteType": 1,
                            "NamePos": 343,
                            "NameEnd": 346
                          },
                          "Params": {
                            "LeftParenPos": 346,
                            "RightParenPos": 347,
                            "Items": {
                              "ListPos": 347,
                              "ListEnd": 347,
                              "HasDistinct": false,
                              "Items": []
                            },
                            "ColumnArgList": null
                          }
                        },
                        "Operation": "-",
                        "RightExpr": {
                          "Name": {
                            "Name": "toIntervalHour",
                            "QuoteType": 1,
                            "NamePos": 351,
                            "NameEnd": 365
                          },
                          "Params": {
                            "LeftParenPos": 365,
                            "RightParenPos": 367,
                            "Items": {
                              "ListPos": 366,
                              "ListEnd": 367,
                              "HasDistinct": false,
                              "Items": [
                                {
                                  "Expr": {
                                    "NumPos": 366,
                                    "NumEnd": 367,
                                    "Literal": "1",
                                    "Base": 10
                                  },
                                  "Alias": null
                                }
                              ]
                            },
                            "ColumnArgList": null
                          }
                        },
                        "HasGlobal": false,
                        "HasNot": false
                      },
                      "Alias": null
                    }
                  ]
                },
                "ColumnArgList": null
              }
            },
            "HasGlobal": false,
            "HasNot": false
          }
        },
        "GroupBy": null,
        "WithTotal": false,
        "Having": null,
        "OrderBy": null,
        "LimitBy": null,
        "Limit": null,
        "Settings": null,
        "Format": null,
        "UnionAll": null,
        "UnionDistinct": null,
        "Except": null
      }
    },
    "Populate": false,
    "Comment": {
      "LiteralPos": 381,
      "LiteralEnd": 393,
      "Literal": "Test comment"
    },
    "Definer": {
      "Name": "default",
      "QuoteType": 1,
      "NamePos": 192,
      "NameEnd": 199
    },
    "SQLSecurity": "DEFINER"
  }
]